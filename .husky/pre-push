echo '#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo "Checking for test.only and describe.only"
files=$(git diff --cached --name-only | grep -E '\.(spec\.ts|ts)$')
if [ -n "$files" ]; then
  matches=$(echo "$files" | xargs grep -l -E '^\s*(test|describe|it)\.only' 2>/dev/null)
  if [ -n "$matches" ]; then
    echo "$matches"
    echo "Push blocked: Found test.only / describe.only / it.only in staged files!"
    exit 1
  fi
fi
echo "No test.only found in staged files."' > .husky/pre-push
